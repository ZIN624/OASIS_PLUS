<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/main.css" />

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9YH2QSNK75"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-9YH2QSNK75");
    </script>
    <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
        c[a] =
          c[a] ||
          function () {
            (c[a].q = c[a].q || []).push(arguments);
          };
        t = l.createElement(r);
        t.async = 1;
        t.src = "https://www.clarity.ms/tag/" + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, "clarity", "script", "rg5tervkjw");
    </script>
  </head>

  <body>
    <section class="select" id="select">
      <button type="button" data-mode="new">初めての方</button>
      <button type="button" data-mode="existing">2回目以降のお客様</button>
    </section>

    <section id="new" class="notice mode-panel" hidden>
      <h2 class="notice__title">顧客情報の登録</h2>
      <form id="customerForm">
        <div class="input-wrapper">
          <label for="username" class="input-label">予約者名<span class="required">必須</span></label>
          <input type="text" id="username" name="username" class="input-field" placeholder="オアシス太郎" />
          <p class="error-text" id="usernameError"></p>
        </div>

        <div class="input-wrapper">
          <label for="furigana" class="input-label">フリガナ<span class="required">必須</span></label>
          <input type="text" id="furigana" name="furigana" class="input-field" placeholder="オアシスタロウ" />
          <p class="error-text" id="furiganaError"></p>
        </div>

        <div class="input-wrapper">
          <label class="input-label">性別<span class="required">必須</span></label>
          <label><input type="radio" id="male" name="gender" value="男性" /> 男性</label>
          <label><input type="radio" id="female" name="gender" value="女性" /> 女性</label>
          <label><input type="radio" id="other" name="gender" value="その他" /> その他</label>
          <p class="error-text" id="genderError"></p>
        </div>

        <div class="input-wrapper">
          <label for="phoneNumber" class="input-label">電話番号<span class="required">必須</span></label>
          <input type="text" id="phoneNumber" name="phoneNumber" class="input-field" placeholder="例: 090-1234-5678 または 09012345678" />
          <p class="error-text" id="phoneNumberError"></p>
        </div>

        <button type="submit" id="registerCustomerBtn" class="btn">登録して予約へ進む</button>
        <button type="button" id="backToTopFromNew" class="btn btn-sub">TOPへ戻る</button>
      </form>
    </section>

    <section id="existing" class="notice mode-panel" hidden>
      <h2 class="notice__title">既存のお客様</h2>
      <p class="existing-question">前回のお客様の登録情報と変更はございませんか</p>
      <div class="existing-actions">
        <button type="button" id="existingSameBtn" class="btn">はい（前回と同じ）</button>
        <button type="button" id="existingChangeBtn" class="btn btn-sub">いいえ（変更する）</button>
      </div>
      <button type="button" id="backToTopFromExisting" class="btn btn-sub">TOPへ戻る</button>
    </section>

    <section class="form-area" id="formArea" style="display: none">
      <h1>OASIS<br />予約希望フォーム</h1>

      <div class="step-progress">
        <div class="step" id="step-0">
          <span class="circle">1</span>
          <p>日程</p>
        </div>
        <div class="line"></div>
        <div class="step" id="step-1">
          <span class="circle">2</span>
          <p>メニュー</p>
        </div>
        <div class="line"></div>
        <div class="step" id="step-2">
          <span class="circle">3</span>
          <p>担当者</p>
        </div>
        <div class="line"></div>
        <div class="step" id="step-3">
          <span class="circle">4</span>
          <p>確認</p>
        </div>
      </div>

      <section id="reservationSummary" style="display: none">
        <h2>予約内容の確認</h2>
        <div id="summaryDetails"></div>
        <button type="button" id="editReservation" class="btn">内容を変更</button>

        <div id="agreement-summary">
          <h3>同意事項</h3>
          <p>以下の内容に同意いただき、「同意する」にチェックを入れて送信を確定してください。</p>
          <ul>
            <li>予約内容は正確に入力してください。</li>
            <li>無断キャンセルはご遠慮ください。</li>
            <li>不明点は店舗へお問い合わせください（備考欄・LINEチャット・お電話）。</li>
            <li class="highlighted">ご予約状況により希望に添えない場合があります。あらかじめご了承ください。</li>
          </ul>
          <label><input type="checkbox" id="agreeCheckbox" /> 同意する</label>
          <button type="button" id="submitbtn" class="submit-btn">送信する</button>
        </div>
      </section>

      <form id="reservationForm">
        <h2 class="title">第1希望<span class="required">必須</span></h2>
        <div class="date-container">
          <select id="day1" name="day1" class="input-select calendar-select-source" required></select>
          <div class="input-wrapper">
            <label for="time1" class="input-label">時間:</label>
            <select id="time1" name="time1" class="input-select" required>
              <option value="9:00">9:00</option>
              <option value="10:00">10:00</option>
              <option value="11:00">11:00</option>
              <option value="12:00">12:00</option>
              <option value="13:00">13:00</option>
              <option value="14:00">14:00</option>
              <option value="15:00">15:00</option>
              <option value="16:00">16:00</option>
              <option value="17:00">17:00</option>
              <option value="18:00">18:00</option>
            </select>
          </div>

          <button type="button" id="addSecondChoice">第2希望を追加</button>
          <div id="secondChoice"></div>

          <button type="button" id="addThirdChoice">第3希望を追加</button>
          <div id="thirdChoice"></div>
        </div>

        <h2 class="title" id="menuSectionTitle">メニュー選択<span class="required">必須</span></h2>
        <div id="menu-container">
          <input type="hidden" id="selectedMenuInput" name="menu" />

          <div class="menu-card" data-menu="カットエステ">
            <div class="menu-image"><img src="img/2521459.jpg" alt="カットエステ" /></div>
            <div class="menu-info"><h3>カットエステ</h3></div>
          </div>

          <div class="menu-card" data-menu="カラーケア">
            <div class="menu-image"><img src="img/2521459.jpg" alt="カラーケア" /></div>
            <div class="menu-info"><h3>カラーケア</h3></div>
          </div>

          <div class="menu-card" data-menu="ストレートケア">
            <div class="menu-image"><img src="img/2521459.jpg" alt="ストレートケア" /></div>
            <div class="menu-info"><h3>ストレートケア</h3></div>
          </div>

          <div class="menu-card" data-menu="トリートメントケア">
            <div class="menu-image"><img src="img/2521459.jpg" alt="トリートメントケア" /></div>
            <div class="menu-info"><h3>トリートメントケア</h3></div>
          </div>

          <div class="menu-card" data-menu="パーマケア">
            <div class="menu-image"><img src="img/2521459.jpg" alt="パーマケア" /></div>
            <div class="menu-info"><h3>パーマケア</h3></div>
          </div>

          <div class="menu-card" data-menu="その他">
            <div class="menu-image"><img src="img/2521459.jpg" alt="その他" /></div>
            <div class="menu-info">
              <h3>その他メニュー</h3>
              <p>詳細をご記入ください</p>
            </div>
          </div>
        </div>
        <p class="error-text" id="menuError"></p>

        <div id="other-input-container" class="input-wrapper" style="display: none">
          <label for="otherMenuInput" class="input-label">その他メニュー:</label>
          <input type="text" id="otherMenuInput" class="input-field" placeholder="具体的にご記入してください" />
          <p class="error-text" id="otherMenuError"></p>
        </div>

        <h2 class="title" id="stylistSectionTitle">担当スタイリスト<span class="required">必須</span></h2>
        <div id="stylist-container">
          <input type="hidden" id="selectedStylistInput" name="stylist" />

          <div class="stylist-card" data-stylist="指名なし">
            <div class="stylist-image"><img src="img/OASISPLUS.jpg" alt="指名なし" /></div>
            <div class="stylist-info"><h3>指名なし</h3></div>
          </div>

          <div class="stylist-card" data-stylist="岡崎仁渡">
            <div class="stylist-image"><img src="img/岡崎仁渡.jpg" alt="岡崎仁渡" /></div>
            <div class="stylist-info"><h3>岡崎仁渡</h3><p>ディレクター</p></div>
          </div>

          <div class="stylist-card" data-stylist="岡崎菜月" data-status="restricted">
            <div class="stylist-image"><img src="img/岡崎菜月.jpg" alt="岡崎菜月" /></div>
            <div class="stylist-info"><h3>岡崎菜月</h3><p>チーフ（現在育休で予約制限中）</p></div>
          </div>
        </div>
        <p class="error-text" id="stylistError"></p>

        <h2 class="title">備考</h2>
        <div class="input-wrapper">
          <label for="comments" class="input-label">ご要望・コメント</label>
          <textarea id="comments" name="comments" class="input-field" rows="4" placeholder="ご要望があればご記入ください"></textarea>
        </div>

        <button id="submitReservation" class="btn">確認へ進む</button>
      </form>
    </section>
    <div class="scroll-hint" id="summaryScrollHint" aria-hidden="true">
      <span class="scroll-hint__text">下にスクロール</span>
      <span class="scroll-hint__arrow"></span>
    </div>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="./js/liff-init.js" defer></script>
    <script src="./js/calender.js" defer></script>
    <script src="./js/storage.js" defer></script>
    <script src="./js/validation.js" defer></script>
    <script src="./js/ui-init.js" defer></script>
    <script src="./js/reservation.js" defer></script>
  </body>
</html>
